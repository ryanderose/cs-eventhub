{
  "$schema": "https://openapi.vercel.sh/vercel.json",
  "version": 2,
  "alias": ["api.townthink.com", "config.townthink.com"],
  "functions": {
    "api/v1/compose.ts": { "runtime": "edge", "maxDuration": 15 },
    "api/v1/fragment.ts": { "runtime": "edge" },
    "api/v1/plan/[id].ts": { "runtime": "nodejs20.x" },
    "api/v1/interpret.ts": { "runtime": "nodejs20.x" },
    "api/config/tenants/[tenant].ts": { "runtime": "nodejs20.x" }
  },
  "rewrites": [
    { "source": "/v1/compose", "destination": "/api/v1/compose" },
    { "source": "/v1/fragment/:tenantId", "destination": "/api/v1/fragment?tenantId=:tenantId" },
    { "source": "/v1/plan/:id", "destination": "/api/v1/plan/:id" },
    { "source": "/v1/interpret", "destination": "/api/v1/interpret" },
    { "source": "/config/tenants/:tenant.json", "destination": "/api/config/tenants/:tenant" },
    { "source": "/tenants/:tenant.json", "destination": "/api/config/tenants/:tenant" }
  ],
  "headers": [
    {
      "source": "/(.*)",
      "has": [{ "type": "host", "value": "api.townthink.com" }],
      "headers": [{ "key": "x-environment", "value": "production" }]
    },
    {
      "source": "/(.*)",
      "has": [{ "type": "host", "value": "config.townthink.com" }],
      "headers": [{ "key": "x-environment", "value": "production" }]
    }
  ]
}

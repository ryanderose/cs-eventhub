"use strict";var EventsHubEmbed=(()=>{var m=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var k=Object.prototype.hasOwnProperty;var S=(t,e)=>{for(var r in e)m(t,r,{get:e[r],enumerable:!0})},x=(t,e,r,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of E(e))!k.call(t,s)&&s!==r&&m(t,s,{get:()=>e[s],enumerable:!(a=y(e,s))||a.enumerable});return t};var C=t=>x(m({},"__esModule",{value:!0}),t);var U={};S(U,{baseTokens:()=>f,create:()=>R});var u,l;function h(t){return Buffer.from(t).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function M(){if(u!==void 0)return u;let t=(()=>{try{return Function('return typeof require === "function" ? require : null')()}catch(e){return process.env.DEBUG?.includes("router-helpers")&&console.warn("Failed to access require for zstd loader",e),null}})();if(!t)return u=null,u;try{let e=t("@napi-rs/zstd");return u={compress(r,a){return e.compress(Buffer.from(r),a)},decompress(r){return e.decompress(Buffer.from(r))}},u}catch(e){return process.env.DEBUG?.includes("router-helpers")&&console.warn("Falling back to Brotli compression for plan encoding",e),u=null,u}}function w(){if(l!==void 0)return l;let t=(()=>{try{return Function('return typeof require === "function" ? require : null')()}catch(e){return process.env.DEBUG?.includes("router-helpers")&&console.warn("Failed to access require for brotli loader",e),null}})();if(!t)return l=null,l;try{let e=t("node:zlib");return!e?.brotliCompressSync||!e?.brotliDecompressSync?(l=null,l):(l={brotliCompressSync:e.brotliCompressSync.bind(e),brotliDecompressSync:e.brotliDecompressSync.bind(e)},l)}catch(e){return process.env.DEBUG?.includes("router-helpers")&&console.warn("Falling back to plain encoding for plan encoding",e),l=null,l}}function b(t){let e=JSON.stringify(t),r=M(),a=Buffer.from(e);if(r){let o=r.compress(a,3);return`z:${h(o)}`}let s=w();if(s){let o=s.brotliCompressSync(a,{params:{1:5}});return`b:${h(o)}`}return`p:${h(a)}`}var f={"--eh-color-bg":"#0b1120","--eh-color-text":"#f8fafc","--eh-font-family":"'Inter', system-ui, sans-serif"};function B(t){return Object.entries(t).map(([e,r])=>`${e}: ${r};`).join(" ")}function g(t){return[`:host{${B(t)}}`,"*, *::before, *::after { box-sizing: border-box; font-family: var(--eh-font-family); }","section[data-block]{ margin: 1rem 0; padding: 1rem; border-radius: 0.75rem; background: rgba(15,23,42,0.6); color: var(--eh-color-text); }","h2{ font-size: 1.25rem; margin: 0 0 0.5rem; }","ul{ margin: 0; padding-left: 1.25rem; }","button{ border-radius: 999px; border: 1px solid rgba(148,163,184,0.3); background: transparent; color: inherit; padding: 0.5rem 1rem; cursor: pointer; }","button:focus{ outline: 2px solid #38bdf8; outline-offset: 2px; }"].join(`
`)}var v=class{constructor(){this.listeners=new Map}ensureListenerSet(e){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e)}on(e,r){this.ensureListenerSet(e).add(r)}off(e,r){this.listeners.get(e)?.delete(r)}emit(e,r){this.listeners.get(e)?.forEach(s=>s(r))}};function D(t={}){return{...f,...t}}function P(t,e={}){let r=document.createElement("style"),a=D(e);r.textContent=g(a),t.appendChild(r)}function L(t){if(t.tagName.toLowerCase()==="iframe"||t.querySelector("iframe"))throw new Error("Iframe containers are not supported. Embed must run in the host DOM.")}function T(t,e,r){let a=t.querySelector("[data-root]");a&&t.removeChild(a);let s=document.createElement("div");s.setAttribute("data-root",""),s.setAttribute("role","region"),s.setAttribute("aria-label",e.title);for(let o of e.blocks){let i=document.createElement("section");i.dataset.block=o.kind,i.tabIndex=0;let c=document.createElement("h2");switch(c.textContent=o.kind.replace(/-/g," "),i.appendChild(c),o.kind){case"collection-rail":{let n=document.createElement("ul");for(let d of o.data.events){let p=document.createElement("li");p.textContent=`${d.name} \u2014 ${d.venue.name}`,n.appendChild(p)}i.appendChild(n);break}case"hero-carousel":{let n=document.createElement("ul");for(let d of o.data.items){let p=document.createElement("li");p.textContent=d.headline,n.appendChild(p)}i.appendChild(n);break}case"filter-bar":{let n=document.createElement("div"),d=document.createElement("button");d.type="button",d.textContent="Reset filters",d.addEventListener("click",()=>{r.emit("analytics:event",{name:"filters.reset",payload:{active:o.data.active}})}),n.appendChild(d),i.appendChild(n);break}case"map-grid":{let n=document.createElement("div");n.textContent=`Map with ${o.data.events.length} pins.`,i.appendChild(n);break}case"promo-slot":{let n=document.createElement("p");n.textContent=`${o.data.disclosure} \u2022 ${o.data.advertiser??"House"}`,i.appendChild(n);break}case"event-detail":{let n=document.createElement("p");n.textContent=o.data.event.description??o.data.event.name,i.appendChild(n);break}case"event-mini-chat":{let n=document.createElement("button");n.type="button",n.textContent="Ask about this event",n.addEventListener("click",()=>{r.emit("analytics:event",{name:"chat.open",payload:{eventId:o.data.eventId}})}),i.appendChild(n);break}default:{let n=document.createElement("pre");n.textContent=JSON.stringify(o.data,null,2),i.appendChild(n);break}}s.appendChild(i)}t.appendChild(s)}function R({container:t,tenantId:e,initialPlan:r,theme:a}){L(t);let s=t.attachShadow({mode:"open"});P(s,a);let o=new v,i={hydrateNext({plan:c,pushState:n=!0}){try{if(T(s,c,o),n&&typeof history<"u"){let d=b(c),p=new URL(window.location.href);p.searchParams.set("plan",d),history.replaceState({plan:d},"",p.toString())}o.emit("plan:hydrate",{plan:c})}catch(d){o.emit("plan:error",{error:d})}},destroy(){t.replaceChildren()},on(c,n){o.on(c,n)},off(c,n){o.off(c,n)},getShadowRoot(){return s}};return queueMicrotask(()=>{o.emit("ready",{tenantId:e}),r&&i.hydrateNext({plan:r,pushState:!1})}),i}return C(U);})();
//# sourceMappingURL=hub-embed.umd.js.map
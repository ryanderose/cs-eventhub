{"version":3,"sources":["../src/index.ts","../../router-helpers/src/index.ts","../src/theme.ts"],"sourcesContent":["import type { PageDoc } from '@events-hub/page-schema';\nimport { encodePlan } from '@events-hub/router-helpers';\nimport { baseTokens, createShadowThemeCss, type TokenMap } from './theme';\n\nexport type EmbedConfig = {\n  container: HTMLElement;\n  tenantId: string;\n  initialPlan?: PageDoc;\n  theme?: Record<string, string>;\n};\n\nexport type HydrateOptions = {\n  plan: PageDoc;\n  pushState?: boolean;\n};\n\nexport type SdkEventMap = {\n  ready: { tenantId: string };\n  'plan:hydrate': { plan: PageDoc };\n  'plan:error': { error: Error };\n  'analytics:event': { name: string; payload: Record<string, unknown> };\n};\n\nexport type EmbedHandle = {\n  hydrateNext(options: HydrateOptions): void;\n  destroy(): void;\n  on<Event extends keyof SdkEventMap>(event: Event, listener: (payload: SdkEventMap[Event]) => void): void;\n  off<Event extends keyof SdkEventMap>(event: Event, listener: (payload: SdkEventMap[Event]) => void): void;\n  getShadowRoot(): ShadowRoot;\n};\n\ntype Listener<Event extends keyof SdkEventMap> = (payload: SdkEventMap[Event]) => void;\n\nclass EventEmitter {\n  private listeners = new Map<keyof SdkEventMap, Set<Listener<keyof SdkEventMap>>>();\n\n  private ensureListenerSet<Event extends keyof SdkEventMap>(event: Event): Set<Listener<Event>> {\n    if (!this.listeners.has(event)) {\n      this.listeners.set(event, new Set());\n    }\n    return this.listeners.get(event)! as Set<Listener<Event>>;\n  }\n\n  on<Event extends keyof SdkEventMap>(event: Event, listener: Listener<Event>): void {\n    this.ensureListenerSet(event).add(listener);\n  }\n\n  off<Event extends keyof SdkEventMap>(event: Event, listener: Listener<Event>): void {\n    const listeners = this.listeners.get(event) as Set<Listener<Event>> | undefined;\n    listeners?.delete(listener);\n  }\n\n  emit<Event extends keyof SdkEventMap>(event: Event, payload: SdkEventMap[Event]): void {\n    const listeners = this.listeners.get(event) as Set<Listener<Event>> | undefined;\n    listeners?.forEach((listener) => listener(payload));\n  }\n}\n\nfunction resolveTokens(theme: Record<string, string> = {}): TokenMap {\n  return { ...baseTokens, ...theme } satisfies TokenMap;\n}\n\nfunction applyShadowStyles(root: ShadowRoot, theme: Record<string, string> = {}): void {\n  const style = document.createElement('style');\n  const tokens = resolveTokens(theme);\n  style.textContent = createShadowThemeCss(tokens);\n  root.appendChild(style);\n}\n\nfunction assertNoIframe(container: HTMLElement): void {\n  if (container.tagName.toLowerCase() === 'iframe' || container.querySelector('iframe')) {\n    throw new Error('Iframe containers are not supported. Embed must run in the host DOM.');\n  }\n}\n\nfunction renderPlan(root: ShadowRoot, plan: PageDoc, emitter: EventEmitter) {\n  const existing = root.querySelector('[data-root]');\n  if (existing) {\n    root.removeChild(existing);\n  }\n  const wrapper = document.createElement('div');\n  wrapper.setAttribute('data-root', '');\n  wrapper.setAttribute('role', 'region');\n  wrapper.setAttribute('aria-label', plan.title);\n\n  for (const block of plan.blocks) {\n    const section = document.createElement('section');\n    section.dataset.block = block.kind;\n    section.tabIndex = 0;\n    const heading = document.createElement('h2');\n    heading.textContent = block.kind.replace(/-/g, ' ');\n    section.appendChild(heading);\n\n    switch (block.kind) {\n      case 'collection-rail': {\n        const list = document.createElement('ul');\n        for (const event of block.data.events) {\n          const item = document.createElement('li');\n          item.textContent = `${event.name} — ${event.venue.name}`;\n          list.appendChild(item);\n        }\n        section.appendChild(list);\n        break;\n      }\n      case 'hero-carousel': {\n        const list = document.createElement('ul');\n        for (const item of block.data.items) {\n          const li = document.createElement('li');\n          li.textContent = item.headline;\n          list.appendChild(li);\n        }\n        section.appendChild(list);\n        break;\n      }\n      case 'filter-bar': {\n        const container = document.createElement('div');\n        const button = document.createElement('button');\n        button.type = 'button';\n        button.textContent = 'Reset filters';\n        button.addEventListener('click', () => {\n          emitter.emit('analytics:event', { name: 'filters.reset', payload: { active: block.data.active } });\n        });\n        container.appendChild(button);\n        section.appendChild(container);\n        break;\n      }\n      case 'map-grid': {\n        const map = document.createElement('div');\n        map.textContent = `Map with ${block.data.events.length} pins.`;\n        section.appendChild(map);\n        break;\n      }\n      case 'promo-slot': {\n        const disclosure = document.createElement('p');\n        disclosure.textContent = `${block.data.disclosure} • ${block.data.advertiser ?? 'House'}`;\n        section.appendChild(disclosure);\n        break;\n      }\n      case 'event-detail': {\n        const details = document.createElement('p');\n        details.textContent = block.data.event.description ?? block.data.event.name;\n        section.appendChild(details);\n        break;\n      }\n      case 'event-mini-chat': {\n        const chat = document.createElement('button');\n        chat.type = 'button';\n        chat.textContent = 'Ask about this event';\n        chat.addEventListener('click', () => {\n          emitter.emit('analytics:event', { name: 'chat.open', payload: { eventId: block.data.eventId } });\n        });\n        section.appendChild(chat);\n        break;\n      }\n      default: {\n        const pre = document.createElement('pre');\n        pre.textContent = JSON.stringify(block.data, null, 2);\n        section.appendChild(pre);\n        break;\n      }\n    }\n\n    wrapper.appendChild(section);\n  }\n\n  root.appendChild(wrapper);\n}\n\nexport function create({ container, tenantId, initialPlan, theme }: EmbedConfig): EmbedHandle {\n  assertNoIframe(container);\n  const shadow = container.attachShadow({ mode: 'open' });\n  applyShadowStyles(shadow, theme);\n  const emitter = new EventEmitter();\n\n  const handle: EmbedHandle = {\n    hydrateNext({ plan, pushState = true }) {\n      try {\n        renderPlan(shadow, plan, emitter);\n        if (pushState && typeof history !== 'undefined') {\n          const encoded = encodePlan(plan);\n          const url = new URL(window.location.href);\n          url.searchParams.set('plan', encoded);\n          history.replaceState({ plan: encoded }, '', url.toString());\n        }\n        emitter.emit('plan:hydrate', { plan });\n      } catch (error) {\n        emitter.emit('plan:error', { error: error as Error });\n      }\n    },\n    destroy() {\n      container.replaceChildren();\n    },\n    on(event, listener) {\n      emitter.on(event, listener);\n    },\n    off(event, listener) {\n      emitter.off(event, listener);\n    },\n    getShadowRoot() {\n      return shadow;\n    }\n  };\n\n  queueMicrotask(() => {\n    emitter.emit('ready', { tenantId });\n    if (initialPlan) {\n      handle.hydrateNext({ plan: initialPlan, pushState: false });\n    }\n  });\n\n  return handle;\n}\n\nexport { baseTokens } from './theme';\n","import type { PageDoc } from '@events-hub/page-schema';\n\ntype ZstdModule = {\n  compress(data: Uint8Array, level?: number): Uint8Array;\n  decompress(data: Uint8Array): Uint8Array;\n};\n\ntype BrotliModule = {\n  brotliCompressSync(input: Buffer, options?: unknown): Buffer;\n  brotliDecompressSync(input: Buffer): Buffer;\n};\n\nlet zstd: ZstdModule | null | undefined;\nlet brotli: BrotliModule | null | undefined;\n\nfunction toBase64UrlBuffer(buffer: Uint8Array) {\n  return Buffer.from(buffer)\n    .toString('base64')\n    .replace(/\\+/g, '-')\n    .replace(/\\//g, '_')\n    .replace(/=+$/, '');\n}\n\nfunction fromBase64UrlBuffer(payload: string): Buffer {\n  const normalized = payload.replace(/-/g, '+').replace(/_/g, '/');\n  const padded = normalized + '==='.slice((normalized.length + 3) % 4);\n  return Buffer.from(padded, 'base64');\n}\n\nfunction loadZstd(): ZstdModule | null {\n  if (zstd !== undefined) return zstd;\n  const req: ((id: string) => any) | null = (() => {\n    try {\n      // eslint-disable-next-line @typescript-eslint/no-implied-eval\n      return Function('return typeof require === \"function\" ? require : null')();\n    } catch (error) {\n      if (process.env.DEBUG?.includes('router-helpers')) {\n        console.warn('Failed to access require for zstd loader', error);\n      }\n      return null;\n    }\n  })();\n  if (!req) {\n    zstd = null;\n    return zstd;\n  }\n  try {\n    // Attempt to load a native zstd binding if present. Optional dependency.\n    const module = req('@napi-rs/zstd') as { compress: (input: Buffer, level?: number) => Buffer; decompress: (input: Buffer) => Buffer };\n    zstd = {\n      compress(data, level) {\n        return module.compress(Buffer.from(data), level);\n      },\n      decompress(data) {\n        return module.decompress(Buffer.from(data));\n      }\n    };\n    return zstd;\n  } catch (error) {\n    if (process.env.DEBUG?.includes('router-helpers')) {\n      console.warn('Falling back to Brotli compression for plan encoding', error);\n    }\n    zstd = null;\n    return zstd;\n  }\n}\n\nfunction loadBrotli(): BrotliModule | null {\n  if (brotli !== undefined) return brotli;\n  const req: ((id: string) => any) | null = (() => {\n    try {\n      // eslint-disable-next-line @typescript-eslint/no-implied-eval\n      return Function('return typeof require === \"function\" ? require : null')();\n    } catch (error) {\n      if (process.env.DEBUG?.includes('router-helpers')) {\n        console.warn('Failed to access require for brotli loader', error);\n      }\n      return null;\n    }\n  })();\n  if (!req) {\n    brotli = null;\n    return brotli;\n  }\n  try {\n    const module = req('node:zlib') as Partial<BrotliModule> | undefined;\n    if (!module?.brotliCompressSync || !module?.brotliDecompressSync) {\n      brotli = null;\n      return brotli;\n    }\n    brotli = {\n      brotliCompressSync: module.brotliCompressSync.bind(module),\n      brotliDecompressSync: module.brotliDecompressSync.bind(module)\n    };\n    return brotli;\n  } catch (error) {\n    if (process.env.DEBUG?.includes('router-helpers')) {\n      console.warn('Falling back to plain encoding for plan encoding', error);\n    }\n    brotli = null;\n    return brotli;\n  }\n}\n\nexport function encodePlan(page: PageDoc): string {\n  const json = JSON.stringify(page);\n  const encoder = loadZstd();\n  const inputBuffer = Buffer.from(json);\n  if (encoder) {\n    const compressed = encoder.compress(inputBuffer, 3);\n    return `z:${toBase64UrlBuffer(compressed)}`;\n  }\n  const brotliModule = loadBrotli();\n  if (brotliModule) {\n    const compressed = brotliModule.brotliCompressSync(inputBuffer, { params: { 1: 5 } });\n    return `b:${toBase64UrlBuffer(compressed)}`;\n  }\n  return `p:${toBase64UrlBuffer(inputBuffer)}`;\n}\n\nexport function decodePlan(plan: string): PageDoc {\n  const [mode, payload] = plan.includes(':') ? (plan.split(':', 2) as [string, string]) : ['p', plan];\n  const buffer = fromBase64UrlBuffer(payload);\n  if (mode === 'z') {\n    const encoder = loadZstd();\n    if (!encoder) {\n      throw new Error('Zstd encoded plan provided but zstd module not available');\n    }\n    const decompressed = encoder.decompress(buffer);\n    return JSON.parse(Buffer.from(decompressed).toString('utf8')) as PageDoc;\n  }\n  if (mode === 'b') {\n    const brotliModule = loadBrotli();\n    if (!brotliModule) {\n      throw new Error('Brotli encoded plan provided but brotli module not available');\n    }\n    const decompressed = brotliModule.brotliDecompressSync(buffer);\n    return JSON.parse(decompressed.toString('utf8')) as PageDoc;\n  }\n  return JSON.parse(Buffer.from(buffer).toString('utf8')) as PageDoc;\n}\n\nexport function resolvePlanFromUrl(searchParams: URLSearchParams): string | undefined {\n  return searchParams.get('plan') ?? searchParams.get('p') ?? undefined;\n}\n\nexport function canonicalizePath(path: string): string {\n  return path.replace(/\\/+/, '/');\n}\n","export type TokenMap = Record<string, string>;\n\nexport const baseTokens: TokenMap = {\n  '--eh-color-bg': '#0b1120',\n  '--eh-color-text': '#f8fafc',\n  \"--eh-font-family\": \"'Inter', system-ui, sans-serif\"\n};\n\nexport function toCustomPropertyDeclarations(tokens: TokenMap): string {\n  return Object.entries(tokens)\n    .map(([key, value]) => `${key}: ${value};`)\n    .join(' ');\n}\n\nexport function createShadowThemeCss(tokens: TokenMap): string {\n  const declarations = toCustomPropertyDeclarations(tokens);\n  return [\n    `:host{${declarations}}`,\n    '*, *::before, *::after { box-sizing: border-box; font-family: var(--eh-font-family); }',\n    'section[data-block]{ margin: 1rem 0; padding: 1rem; border-radius: 0.75rem; background: rgba(15,23,42,0.6); color: var(--eh-color-text); }',\n    'h2{ font-size: 1.25rem; margin: 0 0 0.5rem; }',\n    'ul{ margin: 0; padding-left: 1.25rem; }',\n    'button{ border-radius: 999px; border: 1px solid rgba(148,163,184,0.3); background: transparent; color: inherit; padding: 0.5rem 1rem; cursor: pointer; }',\n    'button:focus{ outline: 2px solid #38bdf8; outline-offset: 2px; }'\n  ].join('\\n');\n}\n\nexport function createRootTokenCss(tokens: TokenMap = baseTokens): string {\n  const declarations = toCustomPropertyDeclarations(tokens);\n  return `:root { ${declarations} }\\n`;\n}\n"],"mappings":"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","names":["src_exports","__export","baseTokens","create","zstd","brotli","toBase64UrlBuffer","buffer","loadZstd","zstd","req","error","module","data","level","loadBrotli","brotli","encodePlan","page","json","encoder","inputBuffer","compressed","toBase64UrlBuffer","brotliModule","baseTokens","toCustomPropertyDeclarations","tokens","key","value","createShadowThemeCss","EventEmitter","event","listener","payload","resolveTokens","theme","baseTokens","applyShadowStyles","root","style","tokens","createShadowThemeCss","assertNoIframe","container","renderPlan","plan","emitter","existing","wrapper","block","section","heading","list","item","li","button","map","disclosure","details","chat","pre","create","tenantId","initialPlan","shadow","handle","pushState","encoded","encodePlan","url","error"]}